---
Title: TwitterのBasic認証が廃止になったのでcronの認証方法をOAuthで何とかしてみた
Category:
- Python
- AppEngine
- Tiwtter
Date: 2010-09-01T00:00:00+09:00
URL: https://yoshiyoshifujii.hatenablog.com/entry/20100901/p1
EditURL: https://blog.hatena.ne.jp/yoshiyoshifujii/yoshiyoshifujii.hatenablog.com/atom/entry/11696248318757242943
---


TwitterのBasic認証が廃止になった[http://dev.twitter.com/pages/oauth_faq:title]ことから、cronでBasic認証を使用していたところが使えなくなっちゃった。

Webアクセスの処理ならOAuth認証に変更で終了な話なのだが、cronなので、OAuth認証をするためにTwitterの認証ページに飛んで、ログイン→許可→access_token取得という一連の流れはまあ、ややこい。

ので、cron処理で使用するaccess_tokenをDBにほりこんでずっと使えい！という処理を書いた。

恐らく、アウトー！なやり方だと思うが、ホワイトリスト申請が通るかどうか分からないようなアプリだし、無理矢理やったった。

仕組みは簡単で、

+OAuth認証するためのURLを用意する
+OAuth認証後のaccess_tokenをBigTableに登録する
+cron処理を実行する
+cron処理の最初にBigTableに登録したaccess_tokenを取り出す

という流れ。

1へのアクセスは手動で行なって、Basic認証時に使用していたアカウントで認証する。
3以降は、BigTableのaccess_tokenを使うので、手動で認証する必要はなっしんぐになる。

たぶん、アウトー！なやりかただと思ふ。。。
