---
Title: エキスパート Python プログラミング メモ Vol.1
Category:
- Python
Date: 2010-10-10T00:00:00+09:00
URL: https://yoshiyoshifujii.hatenablog.com/entry/20101010/p1
EditURL: https://blog.hatena.ne.jp/yoshiyoshifujii/yoshiyoshifujii.hatenablog.com/atom/entry/11696248318757242862
---


[http://www.amazon.co.jp/gp/product/4048686291?ie=UTF8&tag=hmcqjmni-22&linkCode=as2&camp=247&creative=7399&creativeASIN=4048686291:title=エキスパートPythonプログラミング] を読むので、読んだ内容の理解を深めるため、メモ的に内容を残すことをしようと思う。

第1章「さあ、はじめよう」は、インストールやらエディタについて色々書いてあるが、ほとんど知ってるし割愛。

**第2章「構文ベストプラクティスークラス以外」

>>
本章では現代的な構文のうち、もっとも重要な要素と、それらの使用方法におけるTipsを説明します。

  ●リスト内包表記
  ●イテレータとジェネレータ
  ●デコレータ
  ●with と contextlib
<<

ですって。超ワクワク。

***2.1 リスト内包表記

>>
言うまでもありませんが、次のようなコードはエレガントではありません。
<<
>|python|
>>> size = 10
>>> L = []
>>> i = 0
>>> while i < size:
...     if i % 2 == 0 and i != 4:
...         L.append(i)
...     i += 1
>>> L
[0, 2, 6, 8]
||<
>>
この書き方はC言語で良いかもしれませんが、次の理由のために、Pythonでは遅くなります。

  ●リストを操作するコードをループ毎にインタプリタ上で処理する必要がある。
  ●カウンタの操作もループ毎にインタプリタ上で処理する必要がある。

このパターンのコードを書く場合には、リスト内包表記を使用するべきです。リスト内包表記を利用すると、先ほどの構文が行っていた処理の一部がインタプリタ内部で実行されるようになるので、処理が速くなります。
<<

ふむふむ。リストに要素をappend()する場合、インタプリタは「リストからappend属性を取り出してそれを関数として呼び出す」という処理をするが、内包表記やと「リストに要素を追加する」という処理になるのか。
だから速いのか。わっかりやすー。

で、コードは、
>|python|
>>> [i for i in range(10) if i % 2 == 0 and i != 4]
[0, 2, 6, 8]
||<

っていうか、速度もそうやけど、なんせコードが1行になってかっちょえーよね。

>>
もう1つの典型的なPythonicな構文の例として、enumerate関数の使い方があります。
<<

だって。その例文が以下。

>|python|
>>> i = 0
>>> seq = ["one", "two", "three"]
>>> for element in seq:
...     seq[i] = '%d: %s' % (i, element)
...     i += 1
...
>>> seq
['0: one', '1: two', '2: three']
||<

ふむ。ほいでー

>|python|
>>> seq = ["one", "two", "three"]
>>> for i, element in enumerate(seq):
...     seq[i] = '%d: %s' % (i, element)
...
>>> seq
['0: one', '1: two', '2: three']
||<

さらにーリスト内包表記でリファクタリングー

>|python|
>>> def _treatment(pos, element):
...     return '%d: %s' % (pos, element)
...
>>> seq = ["one", "two", "three"]
>>> [_treatment(i, el) for i, el in enumerate(seq)]
['0: one', '1: two', '2: three']
||<
